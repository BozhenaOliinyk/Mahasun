{% extends 'base.html' %}
{% block content %}
<div class="edit-container">
    <h2>{% if obj %}Редагування{% else %}Створення{% endif %} постачальника</h2>

    <form class="edit-form" method="POST">
        {% csrf_token %}
        <label>Назва мережі</label>
        <input type="text" name="name" value="{{ obj.name|default:'' }}" required>

        <label>Адреса</label>
        <input type="text" name="address" value="{{ obj.address|default:'' }}">

        <label>Номер телефону</label>
        <input type="text" name="phone_number" value="{{ obj.phone_number|default:'' }}">

        {% if obj %}
        <div class="supplier-spice-list" style="margin-top: 20px; background: #f9f9f9; padding: 10px; border-radius: 5px;">
            <h3>Спеції від цього постачальника:</h3>
            <a href="{% url 'supplier_spices' obj.id %}" style="color: var(--primary-dark); font-weight: bold;">
                Переглянути асортимент ({{ obj.supplierspice_set.count }})
            </a>
        </div>
        {% endif %}

        <button type="submit" class="btn-main" style="margin-top: 20px;">Зберегти</button>
    </form>

    {% if obj %}
    <form action="{% url 'supplier_delete' obj.id %}" method="POST" style="margin-top: 10px;">
        {% csrf_token %}
        <button type="submit" class="btn-delete" onclick="return confirm('Якщо спеції постачає тільки цей постачальник, вони також видаляться. Видалити постачальника?')">
            Видалити
        </button>
    </form>
    {% endif %}

    <div style="margin-top: 10px;">
        <a href="{% url 'supplier_list' %}" class="btn-main btn-outline" style="text-decoration: none; display: block; text-align: center;">Скасувати</a>
    </div>
</div>
{% endblock %}